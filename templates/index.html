<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Case Prediction System</title>
    <style>
      :root {
        --bg-light: linear-gradient(135deg, #a2c2e2, #f6f9fc);
        --bg-dark: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
        --container-light: #ffffff;
        --container-dark: #1e1e1e;
        --text-light: #333;
        --text-dark: #f9f9f9;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(-45deg, #a2c2e2, #f6f9fc, #b0d0e0, #e8f0ff);
        background-size: 400% 400%;
        animation: gradientBG 10s ease infinite;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        transition: background 0.5s ease;
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .container {
        background-color: var(--container-light);
        border-radius: 16px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        padding: 40px;
        width: 450px;
        text-align: center;
        transition: 0.3s ease-in-out;
        position: relative;
        color: var(--text-light);
      }

      .container:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      }

      h1 {
        color: var(--text-light);
        font-size: 1.8rem;
        margin-bottom: 20px;
      }

      p {
        color: #555;
        font-size: 0.95rem;
        margin-bottom: 25px;
      }

      textarea {
        width: 100%;
        height: 150px;
        border: 2px solid #ccc;
        border-radius: 10px;
        padding: 12px;
        font-size: 1rem;
        outline: none;
        resize: none;
        transition: 0.2s;
      }

      textarea:focus {
        border-color: #0078d7;
        box-shadow: 0 0 5px rgba(0, 120, 215, 0.4);
      }

      button {
        margin-top: 25px;
        background-color: #0078d7;
        color: white;
        border: none;
        border-radius: 10px;
        padding: 12px 30px;
        font-size: 1rem;
        cursor: pointer;
        transition: 0.3s;
      }

      button:hover {
        background-color: #005fa3;
      }

      .footer {
        margin-top: 30px;
        font-size: 0.85rem;
        color: #666;
      }

      .footer a {
        color: #0078d7;
        text-decoration: none;
      }

      .footer a:hover {
        text-decoration: underline;
      }

      /*  Loading Spinner */
      .loading-overlay {
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 16px;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }

      .spinner {
        border: 6px solid #f3f3f3;
        border-top: 6px solid #0078d7;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        margin-top: 15px;
        color: #333;
        font-weight: 500;
      }

      textarea.invalid {
        border-color: red;
        box-shadow: 0 0 8px rgba(255, 0, 0, 0.4);
      }

      /*  Dark Mode */
      body.dark {
        background: var(--bg-dark);
        color: var(--text-dark);
      }

      body.dark .container {
        background-color: var(--container-dark);
        color: var(--text-dark);
        box-shadow: 0 8px 20px rgba(255, 255, 255, 0.08);
      }
      body.dark h1 {
        color: white;
      }
      body.dark p {
        color: silver;
      }

      body.dark textarea {
        background-color: #2a2a2a;
        color: #f9f9f9;
        border-color: #555;
      }

      body.dark button {
        background-color: #00bcd4;
      }

      body.dark button:hover {
        background-color: #0097a7;
      }

      /*  Toggle Switch Styling */
      .toggle-container {
        position: absolute;
        top: 15px;
        right: 15px;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 26px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 34px;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }

      input:checked + .slider {
        background-color: #0078d7;
      }

      input:checked + .slider:before {
        transform: translateX(24px);
      }

      /*  Responsive Design */
      @media (max-width: 600px) {
        .container {
          width: 90%;
          padding: 25px;
        }

        h1 {
          font-size: 1.5rem;
        }

        textarea {
          height: 120px;
        }

        button {
          width: 100%;
          font-size: 0.95rem;
        }

        .footer {
          font-size: 0.8rem;
        }
      }

      .history-btn {
        display: inline-block;
        background: linear-gradient(90deg, #6a11cb, #2575fc);
        color: white;
        text-decoration: none;
        font-weight: 600;
        padding: 10px 20px;
        border-radius: 10px;
        transition: 0.3s ease;
        margin-top: 15px;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
      }

      .history-btn:hover {
        background: linear-gradient(90deg, #2575fc, #6a11cb);
        transform: scale(1.05);
      }

      /* -------- AUTH BUTTONS -------- */
.auth-buttons {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-bottom: 15px;
}

.auth-btn {
  padding: 8px 18px;
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  color: white;
  text-decoration: none;
  border-radius: 8px;
  font-weight: 600;
  transition: 0.3s ease;
  box-shadow: 0 5px 12px rgba(0, 0, 0, 0.15);
}

.auth-btn:hover {
  opacity: 0.85;
  transform: translateY(-2px);
}

/* Logout button (simple blue) */
.logout {
  background: #e63946;
}

.logout:hover {
  background: #c52f3b;
}

    </style>
  </head>
  <body>

<div class="container">

  <!--  LOGIN / LOGOUT UI -->

<div class="auth-info">
  {% if current_user.is_authenticated %}
    <p class="auth-text">
      Hi, {{ current_user.username }} —
      <a href="{{ url_for('logout') }}" class="auth-btn logout">Logout</a>
    </p>
  {% else %}
    <div class="auth-buttons">
      <a href="{{ url_for('login') }}" class="auth-btn">Login</a>
      <a href="{{ url_for('register') }}" class="auth-btn">Register</a>
    </div>
  {% endif %}
</div>

  

  <h1>AI Case Prediction System</h1>

  <!-- Theme Toggle -->
  <div class="toggle-container">
    <label class="switch">
      <input type="checkbox" id="theme-toggle" />
      <span class="slider"></span>
    </label>
  </div>

  <center>
    <a href="/history" class="history-btn">View History</a>
  </center>

  <p>
    Enter any real-world situation below, and the AI will analyze it for
    possible positive and negative outcomes.
  </p>

  <form
    id="analyzeForm"
    action="/analyze"
    method="post"
    onsubmit="return validateInput()"
  >
    <textarea
      id="situation"
      name="situation"
      placeholder="Type your situation here..."
      required
    ></textarea>
    <br />
    <button type="submit">Analyze Situation</button>
  </form>

  <!-- Loading Animation -->
  <div class="loading-overlay" id="loading">
    <div class="spinner"></div>
    <div class="loading-text">Analyzing... Please wait</div>
  </div>

  <div class="footer">
    <p>
      Powered by
      <a href="https://ollama.ai" target="_blank">LLaMA3 + Flask</a>
    </p>
  </div>

</div>

</body>

    <script>
      //  Input validation and loading spinner
      const form = document.getElementById("analyzeForm");
      const loadingOverlay = document.getElementById("loading");
      const situationBox = document.getElementById("situation");

      function validateInput() {
        const situation = situationBox.value.trim();
        situationBox.classList.remove("invalid");

        if (situation === "") {
          alert("⚠️ Please enter a situation before analyzing!");
          situationBox.classList.add("invalid");
          return false;
        }

        const wordCount = situation
          .split(/\s+/)
          .filter((word) => word.length > 0).length;
        if (wordCount < 5) {
          alert(
            "⚠️ Please describe your situation in at least 5 words for better analysis!"
          );
          situationBox.classList.add("invalid");
          return false;
        }

        loadingOverlay.style.display = "flex"; // show spinner
        return true; // allow form to submit
      }

      //  Dark mode toggle
      const toggle = document.getElementById("theme-toggle");
      toggle.addEventListener("change", () => {
        document.body.classList.toggle("dark");
      });
    </script>
  </body>
</html>
